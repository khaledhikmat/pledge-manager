@using System.Globalization

<RadzenCard>
    <h3 class="h5">Campaign Match & Deferred Information</h3>
    <div class="row">
        <div class="col-md-4">
            <div>Active Match Fund/Goal</div>
            <b>@String.Format(new System.Globalization.CultureInfo("en-US"), "{0:C}", MatchCompletedAmount) / @String.Format(new System.Globalization.CultureInfo("en-US"), "{0:C}", MatchFullAmount)</b>
            <div class="mt-3">Active Match Progress</div>
            @if (IsActiveMatch) 
            {
                <RadzenProgressBar ProgressBarStyle="ProgressBarStyle.Primary" ShowValue="false" Value="@MatchCompletedAmount" Max="@MatchFullAmount" />
            }
            else
            {
                <span>No active match</span>                
            }
        </div>
        <div class="col-md-4">
            <div>Pending Match Pledges</div>
            <b>@Campaign.PendingMatchPledgesCount</b>
            <div class="mt-3">Pending Match Pledges Amount</div>
            <b>@String.Format(new System.Globalization.CultureInfo("en-US"), "{0:C}", Campaign.PendingMatchPledgesAmount)</b>
        </div>
        <div class="col-md-4">
            <div>Pending Deferred Pledges</div>
            <b>@Campaign.PendingDeferredPledgesCount</b>
            <div class="mt-3">Pending Deferred Pledges Amount</div>
            <b>@String.Format(new System.Globalization.CultureInfo("en-US"), "{0:C}", Campaign.PendingDeferredPledgesAmount)</b>
        </div>
    </div>
</RadzenCard>

@code {
    [Parameter] 
    public Campaign Campaign { get; set; } = default!;

    private double MatchCompletionRatio 
    {
        get
        {
            if (Campaign != null && Campaign.ActiveMatchPledge != null && Campaign.ActiveMatchPledge .Amount > 0)
            {
                return Campaign.MatchFund / Campaign.ActiveMatchPledge.Amount;
            }

            return 0;
        }
    }

    private double MatchCompletedAmount 
    {
        get
        {
            return Campaign.MatchFund;
        }
    }

    private double MatchFullAmount 
    {
        get
        {
            if (Campaign != null && Campaign.ActiveMatchPledge != null && Campaign.ActiveMatchPledge .Amount > 0)
            {
                return Campaign.ActiveMatchPledge.Amount;
            }

            return 0;
        }
    }
    private bool IsActiveMatch 
    {
        get
        {
            if (Campaign != null && Campaign.ActiveMatchPledge != null && Campaign.ActiveMatchPledge .Amount > 0)
            {
                return true;
            }

            return false;
        }
    }
}